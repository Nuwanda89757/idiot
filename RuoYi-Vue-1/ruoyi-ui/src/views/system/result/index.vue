<template>
  <div class="container">
    <el-row class="top-row">
      <el-col :span="24" class="button-col">
        <el-button type="primary" @click="openSettingDialog">设置部门需求量</el-button>
        <el-button type="primary" @click="handleCopyAndRedirect">AI辅助决策</el-button>
      </el-col>
    </el-row>
    <div class="cards-container">
      <el-row :gutter="20" v-for="(row, rowIndex) in chunkedDepartments" :key="rowIndex" class="card-row">
        <el-col :span="4" v-for="department in row" :key="department.unique_id" class="card-col">
          <el-card :body-style="{ padding: '14px' }">
            <img :src="require(`@/assets/images/${department.unique_id}.jpg`)" class="image">
            <div>
              <h3>{{ departmentNames[department.unique_id] }}</h3>
              <p>预计需求人数：{{ Math.round(department.TimeGPT) }}</p>
              <el-tag :type="department.tagType">{{ department.tagText }}</el-tag>
              <div class="bottom clearfix">
                <el-button type="text" class="button" @click="handleMarketCondition(department.unique_id)">市场情况</el-button>
                <el-button type="text" class="button" @click="redirectToDict">市场舆情</el-button>
              </div>
            </div>
          </el-card>
        </el-col>
      </el-row>
    </div>
    <el-dialog title="设置部门需求量" :visible.sync="settingDialogVisible">
      <el-table :data="departments" style="width: 100%">
        <el-table-column prop="unique_id" label="部门"></el-table-column>
        <el-table-column label="需求量">
          <template slot-scope="scope">
            <el-input-number v-model="scope.row.threshold" :min="0"></el-input-number>
          </template>
        </el-table-column>
      </el-table>
      <div slot="footer" class="dialog-footer">
        <el-button @click="settingDialogVisible = false">取消</el-button>
        <el-button type="primary" @click="saveSettings">保存</el-button>
      </div>
    </el-dialog>
  </div>
</template>

<script>
import axios from 'axios';

export default {
  data() {
    return {
      departments: [],
      staffThreshold: 8,  // 默认需求量
      settingDialogVisible: false,
      departmentNames: {
        accounting: '会计部门',
        hr: '人力部门',
        IT: 'IT部门',
        management: '经理部门',
        marketing: '市场部门',
        RandD: '公关部门',
        product_mng: '产品部门',
        sales: '销售部门',
        support: '支持部门',
        technical: '运维部门'
      }
    };
  },
  computed: {
    chunkedDepartments() {
      const chunkSize = 5;
      let result = [];
      for (let i = 0; i < this.departments.length; i += chunkSize) {
        result.push(this.departments.slice(i, i + chunkSize));
      }
      return result;
    }
  },
  mounted() {
    this.fetchData();
  },
  methods: {
    async fetchData() {
      try {
        const response = await axios.get('http://127.0.0.1:5000/get_static_data');
        if (response.data && response.data.data) {
          this.departments = response.data.data.map(dept => ({
            ...dept,
            tagType: this.staffThreshold - dept.TimeGPT > 0 ? 'success' : 'danger',
            tagText: this.staffThreshold - dept.TimeGPT > 0 ? '人员冗余' : '人员空缺',
            threshold: this.staffThreshold  // 将默认需求量应用到每个部门
          }));
        }
      } catch (error) {
        console.error('Failed to fetch data:', error);
      }
    },
    openSettingDialog() {
      this.settingDialogVisible = true;
    },
    handleCopyAndRedirect() {
      const textToCopy = '请结合以下数据给出详细专业的分析，决策结果解释的逻辑要合理具体：各部门冗余或空缺情况，其中正数代表冗余（代表可能需要裁员），负数代表空缺：{\n' +
        '    "success": true,\n' +
        '    "code": 200,\n' +
        '    "message": "成功",\n' +
        '    "data": [\n' +
        '        {\n' +
        '            "部门名": "会计",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "-2.0311851501"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "人力",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "6.1040782928"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "IT",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "13.8004922867"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "经理",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "7.5095477104"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "市场",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "-12.9328317642"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "产品",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "5.8210930824"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "公关",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "3.1657686234"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "软件销售",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "-9.9226427078"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "支持",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "-10.2777252197"\n' +
        '        },\n' +
        '        {\n' +
        '            "部门名": "运维",\n' +
        '            "ds": "2023-01-01",\n' +
        '            "Number_of_people_in_need": "-10.816368103"\n' +
        '        }\n' +
        '    ]\n' +
        '}\n' +
        '以下是各个部门岗位市场实时招聘情况：\n' +
        '人力资源招聘情况：{\n' +
        '    "company_num": 20,\n' +
        '    "avg_salary": 10000,\n' +
        '    "job_num": 30,\n' +
        '    "industry_type": [\n' +
        '        "广东", "江苏", "云南", "福建", "广西", "浙江", "山东", "北京", "江西", "陕西", "吉林", "辽宁"\n' +
        '    ],\n' +
        '    "industry_type_value": [\n' +
        '        5, 3, 2, 3, 1, 4, 2, 3, 1, 2, 2, 2\n' +
        '    ],\n' +
        '    "industry_recruit_people_type": [\n' +
        '        "广东", "江苏", "云南", "福建", "广西", "浙江", "山东", "北京", "江西", "陕西", "吉林", "辽宁"\n' +
        '    ],\n' +
        '    "industry_recruit_people_value": [\n' +
        '        50, 30, 20, 30, 10, 40, 20, 30, 10, 20, 20, 20\n' +
        '    ],\n' +
        '    "industry_avg_salary": [\n' +
        '        9500, 8900, 8700, 9200, 8500, 10000, 9300, 11000, 8800, 9000, 8500, 8600\n' +
        '    ],\n' +
        '    "degree_type": [\n' +
        '        "大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"\n' +
        '    ],\n' +
        '    "degree_value": [\n' +
        '        30, 5, 45, 25, 3, 1, 11\n' +
        '    ],\n' +
        '    "recruit_info": [\n' +
        '        ["人事HR月薪5000+", "惠州", "8-13K", "不限", "本科"],\n' +
        '        ["人力资源专员/助理", "扬州", "4-8K", "不限", "大专"],\n' +
        '        ["人力资源/校招hr-校园招聘专员", "昆明", "6-8K", "1-2年", "本科"]\n' +
        '    ]\n' +
        '}\n' +
        '会计招聘情况：\n' +
        '{\n' +
        '  "company_num": 50,\n' +
        '  "avg_salary": 12000,\n' +
        '  "job_num": 60,\n' +
        '  "industry_type": ["广东", "江苏", "浙江", "山东", "上海", "北京", "四川", "湖北", "福建", "天津"],\n' +
        '  "industry_type_value": [10, 8, 7, 6, 5, 4, 3, 3, 2, 2],\n' +
        '  "industry_recruit_people_type": ["广东", "江苏", "浙江", "山东", "上海", "北京"],\n' +
        '  "industry_recruit_people_value": [120, 90, 80, 70, 60, 50],\n' +
        '  "industry_avg_salary": [13000, 12500, 12000, 11000, 10000, 9500, 9000, 8500, 8000, 7500],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [45, 30, 55, 25, 10, 5, 15],\n' +
        '  "recruit_info": [\n' +
        '    ["医院会计", "东莞", "7-12K", "无经验", "本科"],\n' +
        '    ["会计", "扬州", "4-5K", "1-3年", "大专"],\n' +
        '    ["会计", "湘潭", "6-11K", "3-5年", "本科"],\n' +
        '    ["财务会计专员", "沈阳", "10-15K", "5年以上", "本科"],\n' +
        '    ["会计助理", "上海", "11-17K", "2年", "本科"],\n' +
        '    ["财务会计", "哈密", "7-12K", "3年", "大专"],\n' +
        '    ["财务会计/税务会计", "义乌", "8-12K", "3年", "大专"],\n' +
        '    ["财务会计", "深圳", "10-15K", "2年", "本科"],\n' +
        '    ["财务会计专员", "东莞", "8-13K", "3年", "大专"],\n' +
        '    ["会计", "扬州", "4-7K", "2年", "大专"],\n' +
        '    ["主办会计", "淮安", "8-12K", "5年以上", "大专"],\n' +
        '    ["集团总账会计", "济南", "8-12K", "5年以上", "本科"],\n' +
        '    ["财务会计岗", "惠州", "8-13K", "3年以上", "本科"],\n' +
        '    ["建筑/工程会计", "拉萨", "8-12K", "3年", "大专"],\n' +
        '    ["总账会计", "杭州", "8-13K", "3年", "大专"],\n' +
        '    ["成本会计", "海口", "12-24K", "5年", "本科"],\n' +
        '    ["全盘会计", "深圳", "8-13K", "3年", "大专"],\n' +
        '    ["总账会计", "南通", "8-13K", "5年", "本科"],\n' +
        '    ["成本会计", "宁波", "8-13K", "3年", "本科"],\n' +
        '    ["总账会计", "北京", "10-12K", "2年", "本科"],\n' +
        '    ["总账会计", "深圳", "8-12K", "3年", "大专"],\n' +
        '    ["数码全国连锁财务会计", "深圳", "10-15K", "5年", "本科"],\n' +
        '    ["费用会计", "深圳", "9-11K", "3年", "本科"],\n' +
        '    ["急聘电商公司财务会计", "厦门", "8-13K", "3年", "大专"],\n' +
        '    ["总账会计", "上海", "12-15K", "5年", "本科"],\n' +
        '    ["会计", "拉萨", "9-12K", "3年", "大专"],\n' +
        '    ["财务会计助理", "上海", "11-12K", "3年", "本科"],\n' +
        '    ["会计师", "杭州", "9-13K", "3年", "本科"],\n' +
        '    ["总账会计", "嘉兴", "8-13K", "5年", "本科"],\n' +
        '    ["代理记账会计", "上海", "10-13K", "3年", "大专"]\n' +
        '  ]\n' +
        '}\n' +
        'IT部门招聘情况：{\n' +
        '  "company_num": 1560,\n' +
        '  "avg_salary": 7680.50,\n' +
        '  "job_num": 2020,\n' +
        '  "industry_type": ["北京", "上海", "广东", "浙江", "江苏", "四川", "湖北", "陕西", "湖南", "重庆"],\n' +
        '  "industry_type_value": [45, 50, 70, 120, 5, 38, 47, 140, 15, 55],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广东", "浙江", "江苏", "四川"],\n' +
        '  "industry_recruit_people_value": [145, 130, 90, 85, 82, 79],\n' +
        '  "industry_avg_salary": [6500.5, 7400.8, 7200.5, 7800.3, 11300.0, 7300.0, 8300.6, 9100.0, 5600.0, 8200.0],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [910, 150, 600, 175, 45, 5, 30],\n' +
        '  "recruit_info": [\n' +
        '    ["后端开发工程师", "上海", "18-35K·14薪", "3-4年", "本科"],\n' +
        '    ["后端工程师", "广州·天河区·车陂", "5-10K", "3-4年", "大专"],\n' +
        '    ["后端工程师 - Python", "成都·武侯区·中和", "10-15K·13薪", "3-4年", "本科"],\n' +
        '    ["后端工程师", "太原·小店区·平阳", "15-16K", "2年", "大专"],\n' +
        '    ["后端开发工程师兼运维", "黄冈·麻城市·华英学校", "4-5K", "2年", "本科"],\n' +
        '    ["后端工程师", "北京·东城区·建国门内", "8-13K", "3-4年", "本科"],\n' +
        '    ["高级后端开发工程师", "深圳·南山区·科技园", "10-15K", "3-4年", "本科"],\n' +
        '    ["后端php开发工程师", "黄石·黄石港区·南京路", "7-12K", "3-4年", "本科"],\n' +
        '    ["node后端工程师", "广州·天河区·天河公园", "12-13K·13薪", "3-4年", "本科"],\n' +
        '    ["java后端工程师、前端开发工程师", "太原·小店区·学府街", "5-10K", "3-4年", "本科"],\n' +
        '    ["后端工程师", "广州·白云区·嘉禾", "11-12K", "3-4年", "本科"],\n' +
        '    ["物联网后端工程师", "西安·碑林区·长安路", "100-150元/天", "3-4年", "本科"]\n' +
        '  ]\n' +
        '}\n' +
        '管理部门招聘情况：{\n' +
        '  "company_num": 1700,\n' +
        '  "avg_salary": 18000,\n' +
        '  "job_num": 2200,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "武汉", "西安", "郑州", "长沙"],\n' +
        '  "industry_type_value": [180, 150, 200, 220, 180, 140, 160, 100, 110, 160],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [1800, 1600, 1900, 2100, 1700, 1500],\n' +
        '  "industry_avg_salary": [20000, 19000, 18000, 21000, 22000, 17500, 17000, 16500, 16000, 18000],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [950, 180, 650, 190, 50, 5, 30],\n' +
        '  "recruit_info": [\n' +
        '    ["绩效奖金~互联网公司~周末双休", "温州", "300-400元/天", "3-5年", "本科"],\n' +
        '    ["互联网实习生（可接受2-3个月短期实习）", "成都", "8-12K", "无需经验", "大专"],\n' +
        '    ["互联网产品经理", "曲靖", "15-16K", "3-5年", "本科"],\n' +
        '    ["互联网公司 欢迎小白+ 七险一金", "郑州", "11-14K", "2-3年", "大专"],\n' +
        '    ["工业互联网产品经理", "黄冈", "15-16K", "3-5年", "本科"],\n' +
        '    ["互联网医药代表", "宣城", "4-5K", "1-3年", "大专"],\n' +
        '    ["互联网产品经理", "临沧", "15-20K", "3-5年", "本科"],\n' +
        '    ["互联网合伙人", "漳州", "10-11K", "5-7年", "本科"],\n' +
        '    ["综合管理岗（互联网）行业", "福州", "12-20K", "3-5年", "本科"],\n' +
        '    ["互联网产品经理", "湘潭", "15-18K", "3-5年", "本科"],\n' +
        '    ["15K双休抖音广告销售/互联网大厂(J16183)", "天津", "10-15K", "3-5年", "本科"],\n' +
        '    ["vp（研发出身，互联网，600＋人管理经验）", "成都", "200-260K", "10年以上", "本科"],\n' +
        '    ["固定双休-互联网公司助教", "西安", "7-8K", "2-3年", "大专"],\n' +
        '    ["互联网软件销售（双休+六险一金）", "金华", "12-24K", "3-5年", "本科"],\n' +
        '    ["互联网产品经理", "荆州", "5-10K·13薪", "3-5年", "大专"],\n' +
        '    ["总经理", "漯河", "11-12K", "5-7年", "本科"],\n' +
        '    ["互联网产品经理-纯远程办公", "鄂州", "8-13K", "3-5年", "本科"],\n' +
        '    ["互联网 客户代表", "成都", "15-30K", "3-5年", "本科"],\n' +
        '    ["软件顾问-团队扩招-资源充足-ai互联网", "广州", "10-15K", "3-5年", "本科"]\n' +
        '  ]\n' +
        '}\n' +
        '公关部门市场招聘情况：{\n' +
        '  "company_num": 1500,\n' +
        '  "avg_salary": 8000,\n' +
        '  "job_num": 2000,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "南京", "武汉", "重庆", "西安"],\n' +
        '  "industry_type_value": [150, 130, 120, 110, 100, 90, 80, 70, 60, 50],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [300, 250, 200, 180, 150, 120],\n' +
        '  "industry_avg_salary": [8500, 8200, 8000, 7800, 7600, 7400, 7200, 7000, 6800, 6600],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [950, 160, 620, 180, 45, 5, 30],\n' +
        '  "recruit_info": [\n' +
        '    ["市场公关经理-工作地（自贡）", "自贡", "4-8K", "3-4年", "本科"],\n' +
        '    ["单位公关-工作地（武汉）", "武汉", "8-13K", "2-3年", "本科"],\n' +
        '    ["市场公关总监-工作地（梅州）", "梅州", "20-26K", "5-7年", "本科"],\n' +
        '    ["商务公关经理-工作地（潍坊）", "潍坊", "12-23K", "3-5年", "本科"],\n' +
        '    ["市场公关-工作地（聊城）", "聊城", "7-12K", "2-4年", "大专"],\n' +
        '    ["公关助理-工作地（南京）", "南京", "7-10K", "1-3年", "大专"],\n' +
        '    ["品牌公关-工作地（广州）", "广州", "13-17K", "3-4年", "本科"]\n' +
        '  ]\n' +
        '}\n' +
        '市场部市场招聘情况：\n' +
        '{\n' +
        '  "company_num": 1500,\n' +
        '  "avg_salary": 8200,\n' +
        '  "job_num": 2200,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "南京", "武汉", "重庆", "西安"],\n' +
        '  "industry_type_value": [150, 140, 130, 120, 110, 100, 90, 80, 70, 60],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [320, 270, 220, 200, 160, 140],\n' +
        '  "industry_avg_salary": [8600, 8300, 8100, 7900, 7700, 7500, 7300, 7100, 6900, 6700],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [920, 150, 600, 180, 50, 4, 29],\n' +
        '  "recruit_info": [\n' +
        '    ["市场部经理-工作地（呼伦贝尔）", "呼伦贝尔", "12-24K", "3-4年", "本科"],\n' +
        '    ["市场部-工作地（济宁）", "济宁", "8-13K", "2-3年", "本科"],\n' +
        '    ["家装市场部经理-工作地（百色）", "百色", "9-13K", "2-3年", "大专"],\n' +
        '    ["市场部经理-工作地（红河州）", "红河州", "8-13K", "3-5年", "本科"],\n' +
        '    ["市场部专员-工作地（平顶山）", "平顶山", "7-12K", "2-4年", "大专"],\n' +
        '    ["市场部经理-工作地（铜仁）", "铜仁", "8-12K", "3-4年", "本科"],\n' +
        '    ["市场部主管-工作地（蚌埠）", "蚌埠", "6-11K", "2-3年", "大专"],\n' +
        '    ["市场部专员-工作地（西宁）", "西宁", "6-11K", "2-3年", "大专"],\n' +
        '    ["市场部助理-工作地（舟山）", "舟山", "9-14K", "2-3年", "本科"],\n' +
        '    ["市场部主管-工作地（红河州）", "红河州", "7-12K", "2-4年", "大专"],\n' +
        '    ["市场部销售-工作地（济宁）", "济宁", "10-15K", "2-3年", "本科"],\n' +
        '    ["市场部主管-工作地（荆州）", "荆州", "10-15K", "3-4年", "本科"],\n' +
        '    ["市场部经理-工作地（苏州）", "苏州", "8-13K", "3-4年", "本科"],\n' +
        '    ["市场部专员-工作地（成都）", "成都", "10-15K", "2-3年", "大专"],\n' +
        '    ["市场部助理-工作地（扬州）", "扬州", "4-8K", "1-2年", "大专"]\n' +
        '  ]\n' +
        '}\n' +
        '互联网产品经理部招聘情况：\n' +
        '{\n' +
        '  "company_num": 1500,\n' +
        '  "avg_salary": 8200,\n' +
        '  "job_num": 2200,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "南京", "武汉", "重庆", "西安"],\n' +
        '  "industry_type_value": [150, 140, 130, 120, 110, 100, 90, 80, 70, 60],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [320, 270, 220, 200, 160, 140],\n' +
        '  "industry_avg_salary": [8600, 8300, 8100, 7900, 7700, 7500, 7300, 7100, 6900, 6700],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [920, 150, 600, 180, 50, 4, 29],\n' +
        '  "recruit_info": [\n' +
        '    ["市场部经理-工作地（呼伦贝尔）", "呼伦贝尔", "12-24K", "3-4年", "本科"],\n' +
        '    ["市场部-工作地（济宁）", "济宁", "8-13K", "2-3年", "本科"],\n' +
        '    ["家装市场部经理-工作地（百色）", "百色", "9-13K", "2-3年", "大专"],\n' +
        '    ["市场部经理-工作地（红河州）", "红河州", "8-13K", "3-5年", "本科"],\n' +
        '    ["市场部专员-工作地（平顶山）", "平顶山", "7-12K", "2-4年", "大专"],\n' +
        '    ["市场部经理-工作地（铜仁）", "铜仁", "8-12K", "3-4年", "本科"],\n' +
        '    ["市场部主管-工作地（蚌埠）", "蚌埠", "6-11K", "2-3年", "大专"],\n' +
        '    ["市场部专员-工作地（西宁）", "西宁", "6-11K", "2-3年", "大专"],\n' +
        '    ["市场部助理-工作地（舟山）", "舟山", "9-14K", "2-3年", "本科"],\n' +
        '    ["市场部主管-工作地（红河州）", "红河州", "7-12K", "2-4年", "大专"],\n' +
        '    ["市场部销售-工作地（济宁）", "济宁", "10-15K", "2-3年", "本科"],\n' +
        '    ["市场部主管-工作地（荆州）", "荆州", "10-15K", "3-4年", "本科"],\n' +
        '    ["市场部经理-工作地（苏州）", "苏州", "8-13K", "3-4年", "本科"],\n' +
        '    ["市场部专员-工作地（成都）", "成都", "10-15K", "2-3年", "大专"],\n' +
        '    ["市场部助理-工作地（扬州）", "扬州", "4-8K", "1-2年", "大专"]\n' +
        '  ]\n' +
        '}\n' +
        '软件销售部门招聘情况：\n' +
        '{\n' +
        '  "company_num": 1500,\n' +
        '  "avg_salary": 8200,\n' +
        '  "job_num": 2200,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "南京", "武汉", "重庆", "西安"],\n' +
        '  "industry_type_value": [150, 140, 130, 120, 110, 100, 90, 80, 70, 60],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [320, 270, 220, 200, 160, 140],\n' +
        '  "industry_avg_salary": [8600, 8300, 8100, 7900, 7700, 7500, 7300, 7100, 6900, 6700],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [920, 150, 600, 180, 50, 4, 29],\n' +
        '  "recruit_info": [\n' +
        '    ["软件销售/无责7.8K双休/入职五险一金", "会找房", "北京·海淀区·上地", "21-35K"],\n' +
        '    ["软件销售【双休+月入2W加+六险一金+股票】", "BOSS直聘", "苏州·苏州工业园区·左岸商业街", "12-20K"],\n' +
        '    ["互联网软件产品经理", "里海农科", "泸州·龙马潭区·龙马大道", "6-7K"],\n' +
        '    ["上市公司软件销售/入职五险一金/高底薪提成", "珍岛集团", "无锡·新吴区·华庄", "15-20K"],\n' +
        '    ["无需自拓软件销售+高薪高提成", "易码帮科技", "济南·槐荫区·匡山", "16-30K"],\n' +
        '    ["saas软件销售（接受应届毕业生）", "阳江网胜互联信息公司", "阳江·江城区·天河湾", "6-8K"],\n' +
        '    ["SaaS软件销售，15～40%高提成！省内出差", "森果云", "泸州·龙马潭区·鱼塘", "10-15K"],\n' +
        '    ["区域软件销售", "南京普讯", "包头·昆都仑区·包钢", "10-15K"],\n' +
        '    ["SAAS软件销售（上市公司 双休）", "微盟", "上海·宝山区·淞南", "15-30K"],\n' +
        '    ["兼职财务软件销售", "红河蝶腾科技有限公司", "喀什地区·喀什市·师范学院", "3-8K"],\n' +
        '    ["美团SAAS软件销售BD经理", "合一行", "海口·龙华区·滨海大道", "8-12K"],\n' +
        '    ["医疗器械销售代表", "欣奇迹", "沈阳·沈河区·北站", "8-12K"],\n' +
        '    ["销售管培生+周末双休+当月发薪+师带徒", "探迹", "广州·白云区·嘉禾", "5-10K"],\n' +
        '    ["网易软件销售（周末双休）", "网易企业邮箱经销商", "东莞·南城街道·滨海湾新区", "4-8K"],\n' +
        '    ["软件销售", "泛微网络", "朔州·朔城区·古北街", "5-10K"],\n' +
        '    ["长安汽车销售顾问", "丰正华", "三亚·吉阳区·吉阳镇", "8-13K"],\n' +
        '    ["(双休--五险一金）saas软件销售经理", "HiShop", "长沙·芙蓉区·朝阳路", "5-10K"],\n' +
        '    ["软件销售/太原销售/面销", "秦丝科技", "太原·迎泽区·双塔", "5-10K"],\n' +
        '    ["软件销售/无责底薪4.5起/周末双休/五险一金", "领视科技", "长沙·岳麓区·汽车西站", "10-15K"],\n' +
        '    ["（年轻可培养） 政企软件销售经理", "江苏臻云技术", "南京·栖霞区·马群", "8-10K"]\n' +
        '  ]\n' +
        '}\n' +
        '技术支持部门招聘情况：\n' +
        '{\n' +
        '  "company_num": 1600,\n' +
        '  "avg_salary": 8000.00,\n' +
        '  "job_num": 2050,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "南京", "武汉", "重庆", "西安"],\n' +
        '  "industry_type_value": [100, 120, 130, 140, 110, 90, 80, 85, 70, 75],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [1500, 1600, 1700, 1800, 1400, 1300],\n' +
        '  "industry_avg_salary": [8500.0, 9000.0, 8700.0, 8800.0, 8600.0, 8300.0, 8200.0, 8100.0, 8000.0, 7900.0],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [920, 160, 600, 175, 45, 5, 30],\n' +
        '  "recruit_info": [\n' +
        '    ["IT技术支持", "锡林郭勒盟", "8-13K·16薪", "5-7年", "本科"],\n' +
        '    ["IT技术支持", "石家庄", "3-8K", "3-4年", "本科"],\n' +
        '    ["IT技术支持", "齐齐哈尔", "3-4K", "3-4年", "大专"],\n' +
        '    ["IT技术工程师", "保山", "2-6K·13薪", "1年", "大专"],\n' +
        '    ["京惠联招聘电脑/打印机维修", "北京", "6-8K", "2年", "本科"],\n' +
        '       ["IT技术支持", "晋城", "4-5K", "1年", "大专"],\n' +
        '    ["IT技术支持", "江门", "8-12K", "1年", "大专"],\n' +
        '    ["中信信息招聘电脑维修", "珠海", "3-5K", "1年", "中专"],\n' +
        '    ["技术支持工程师", "广州", "5-6K·13薪", "1年", "大专"],\n' +
        '    ["IT技术支持工程师及学徒", "巴音郭楞", "4-8K", "1年", "大专"],\n' +
        '    ["IT技术支持", "泰安", "5-6K", "1年", "大专"],\n' +
        '    ["IT技术支持", "湘潭", "2-4K", "1年", "大专"],\n' +
        '    ["技术支持实习生", "成都", "200-210元/天", "实习", "本科"],\n' +
        '    ["技术支持开发工程师", "南京", "7-12K·13薪", "1年", "本科"],\n' +
        '    ["技术支持专员", "济宁", "4-5K", "1年", "大专"],\n' +
        '    ["IT信息技术员", "福州", "4-6K", "1年", "大专"],\n' +
        '    ["IT技术支持", "张掖", "3-5K", "1年", "大专"],\n' +
        '    ["IT技术支持", "上海", "200-300元/天", "实习", "本科"],\n' +
        '    ["IT技术支持", "乌鲁木齐", "5-8K", "1年", "大专"],\n' +
        '    ["技术支持", "郑州", "3-4K", "1年", "大专"],\n' +
        '    ["技术支持实习生", "长沙", "150-200元/天", "实习", "本科"],\n' +
        '    ["it技术员", "德宏傣族景颇族自治州", "3-6K", "1年", "大专"],\n' +
        '    ["IT技术支持", "汉中", "3-4K", "1年", "大专"]\n' +
        '  ]\n' +
        '}\n' +
        '运维部门招聘情况：\n' +
        '{\n' +
        '  "company_num": 1600,\n' +
        '  "avg_salary": 8000.00,\n' +
        '  "job_num": 2050,\n' +
        '  "industry_type": ["北京", "上海", "广州", "深圳", "杭州", "成都", "南京", "武汉", "重庆", "西安"],\n' +
        '  "industry_type_value": [100, 120, 130, 140, 110, 90, 80, 85, 70, 75],\n' +
        '  "industry_recruit_people_type": ["北京", "上海", "广州", "深圳", "杭州", "成都"],\n' +
        '  "industry_recruit_people_value": [1500, 1600, 1700, 1800, 1400, 1300],\n' +
        '  "industry_avg_salary": [8500.0, 9000.0, 8700.0, 8800.0, 8600.0, 8300.0, 8200.0, 8100.0, 8000.0, 7900.0],\n' +
        '  "degree_type": ["大专", "高中", "本科", "中技/中专", "初中及以下", "博士", "硕士"],\n' +
        '  "degree_value": [920, 160, 600, 175, 45, 5, 30],\n' +
        '  "recruit_info": [\n' +
        '    ["电子工程师/助理工程师", "长治·潞州区·淮海", "5-10K", "无经验", "本科"],\n' +
        '    ["研发部电子工程师", "宁波·海曙区·集士港", "6-10K·13薪", "3-4年", "本科"],\n' +
        '    ["电子工程师", "济宁·兖州区·开发区", "4-6K", "3-4年", "本科"],\n' +
        '    ["应届生电子工程师", "东莞", "6-10K", "1-2年", "本科"],\n' +
        '        ["电子工程师", "惠州", "8-13K", "3-4年", "本科"],\n' +
        '    ["电子工程师", "来宾·兴宾区·老城区", "3-5K", "2-3年", "本科"],\n' +
        '    ["电子工程师助理", "北京·朝阳区·三里屯", "150-300元/天", "实习", "本科"],\n' +
        '    ["高级电子工程师", "宁波", "8-11K", "3-4年", "本科"],\n' +
        '    ["电子工程师（嘉兴）", "嘉兴·南湖区·凌公塘路", "10-15K", "3-5年", "本科"],\n' +
        '    ["电子工程师-2023届应届毕业生", "惠州·惠城区·水口", "10-15K", "应届生", "本科"],\n' +
        '    ["电子工程师", "济宁", "6-7K", "3-4年", "本科"],\n' +
        '    ["电子工程师", "徐州·铜山区·三堡", "6-9K·13薪", "3-4年", "本科"],\n' +
        '    ["电子工程师（硬件/15K-22K）", "桂林", "15-22K", "3-5年", "本科"],\n' +
        '    ["电子工程师", "苏州·昆山市·锦溪", "10-15K·13薪", "3-5年", "本科"],\n' +
        '    ["电子硬件工程师", "泰州·海陵区·七里桥", "10-15K", "3-5年", "本科"]\n' +
        '  ]\n' +
        '}';
      const el = document.createElement('textarea');
      el.value = textToCopy;
      document.body.appendChild(el);
      el.select();
      document.execCommand('copy');
      document.body.removeChild(el);
      this.$message({
        type: 'success',
        message: '已将源数据导出至剪贴板！请黏贴给决策助手获得AI辅助决策结果'
      });
      this.$router.push('/decision');  // 复制后重定向
    },
    redirectToDict() {
      this.$router.push('/industry');  // 重定向到市场舆情页面
    },
    async handleMarketCondition(departmentId) {
      try {
        await axios.get(`http://127.0.0.1:5000/update_page_data?department=${departmentId}`);
        this.redirectToDict();
      } catch (error) {
        console.error('Failed to update page data:', error);
      }
    }
  }
}
</script>

<style scoped>
.container {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.top-row {
  margin-bottom: 20px;
  width: 100%;
}

.cards-container {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  width: 100%;
}

.card-row {
  width: 100%;
  justify-content: center;
  display: flex;
}

.card-col {
  margin-bottom: 20px;
}

.image {
  width: 100%;
  height: 140px;
  object-fit: cover;
}

.button-col {
  text-align: right;
}
</style>
